{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SIFAT ADNAN\\\\Desktop\\\\creative-agency-client\\\\src\\\\components\\\\Home\\\\Login\\\\Login.js\";\nimport React, { useContext, useState } from 'react';\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport './Login.css';\nimport { UserContext } from '../App';\n\nconst Login = () => {\n  const [LogUser, setLogUser] = useState({\n    isSignIn: false,\n    name: \"\",\n    email: '',\n    password: '',\n    photo: '',\n    error: ''\n  });\n  const [LoggedIn, setLoggedIn] = useContext(UserContext);\n  const history = useHistory();\n  const location = useLocation();\n  let {\n    from\n  } = location.state || {\n    from: {\n      pathname: \"/\"\n    }\n  }; // this is google provider\n\n  const Gprovider = new firebase.auth.GoogleAuthProvider(); // this handleSignInGoogle \n\n  const handleSignInGoogle = () => {\n    console.log('clicked');\n    firebase.auth().signInWithPopup(Gprovider).then(result => {\n      console.log(result);\n      const {\n        displayName,\n        email,\n        photoURL\n      } = result.user;\n      const signInUser = {\n        isSignIn: true,\n        name: displayName,\n        email: email,\n        photo: photoURL\n      };\n      setLogUser(signInUser); // setLoggedIn(signInUser)\n\n      const credential = result.credential;\n      const token = credential.accessToken;\n    }).catch(error => {\n      console.log(error);\n      console.log(error.message);\n    });\n  }; //this is facebook provider\n\n\n  const fbprovider = new firebase.auth.FacebookAuthProvider(); //this handleSignInFacebook \n\n  const handleSignInFacebook = () => {\n    firebase.auth().signInWithPopup(fbprovider).then(result => {\n      /** @type {firebase.auth.OAuthCredential} */\n      var credential = result.credential; // The signed-in user info.\n\n      var user = result.user; // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n\n      var accessToken = credential.accessToken; // ...\n    }).catch(error => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message; // The email of the user's account used.\n\n      var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n      var credential = error.credential; // ...\n    });\n  }; //     this is handlesubmit \n\n\n  const handlesubmitLogin = e => {\n    console.log(\"right\");\n\n    if (LogUser.email && LogUser.password) {\n      console.log(\"clicked\");\n      firebase.auth().signInWithEmailAndPassword(LogUser.email, LogUser.password).then(userCredential => {\n        console.log(\"clicked\");\n        var user = userCredential.user;\n        const newUser = { ...user\n        };\n        newUser.error = '';\n        newUser.success = true;\n        setLogUser(newUser);\n        setLoggedIn(newUser); //  getJwttoken();\n\n        history.replace(from);\n        var user = userCredential.user;\n        console.log(userCredential);\n      }).catch(error => {\n        const newUser = { ...LogUser\n        };\n        newUser.error = error.message;\n        newUser.success = false;\n        setLogUser(newUser);\n        var errorCode = error.code;\n        var errorMessage = error.message;\n      });\n    }\n\n    e.preventDefault();\n  }; // const getJwttoken=()=>{\n  //   firebase.auth().currentUser.getIdToken(/* forceRefresh */ true)\n  //   .then(function(idToken) {\n  //     sessionStorage.setItem('token',idToken);\n  //     // console.log(idToken)\n  //   }).catch(function(error) {\n  //     // Handle error\n  //   });\n  // }\n  //     this is handleformEvent for input tag\n\n\n  const handleformEventLogIn = e => {\n    console.log(e.target.name, e.target.value);\n    let isValidForm = true;\n\n    if (e.target.name === 'name') {\n      isValidForm = e.target.value;\n    }\n\n    if (e.target.name === 'email') {\n      isValidForm = /\\S+@\\S+\\.\\S+/.test(e.target.value);\n    }\n\n    if (e.target.name === 'password') {\n      const isPasswordValid = e.target.value.length > 6;\n      const passwordNumber = /\\d{1}/.test(e.target.value);\n      isValidForm = isPasswordValid && passwordNumber;\n    }\n\n    if (isValidForm) {\n      const newUser = { ...LogUser\n      };\n      newUser[e.target.name] = e.target.value;\n      setLogUser(newUser);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, LogUser.success && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"green\",\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 27\n    }\n  }, \" user \", LogUser ? 'login successfully' : 'failed'), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handlesubmitLogin,\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"cart-input\",\n    type: \"email\",\n    onBlur: handleformEventLogIn,\n    name: \"email\",\n    id: \"\",\n    placeholder: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"cart-input\",\n    type: \"password\",\n    onBlur: handleformEventLogIn,\n    name: \"password\",\n    id: \"\",\n    placeholder: \"Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-cart-child\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"remember-checkbox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    name: \"remember\",\n    id: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"remember\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }, \"Remember Me\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"forget-pass\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, \"Forgot Password\"))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Login\",\n    className: \"login-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 18\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, \"Dont have an account? \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 46\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 65\n    }\n  }, \"Create an Account\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"AutoSignup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, \"or\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSignInGoogle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, \"Continue With Google\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSignInFacebook,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, \"Continue With Facebook\")));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/SIFAT ADNAN/Desktop/creative-agency-client/src/components/Home/Login/Login.js"],"names":["React","useContext","useState","firebase","Link","useHistory","useLocation","UserContext","Login","LogUser","setLogUser","isSignIn","name","email","password","photo","error","LoggedIn","setLoggedIn","history","location","from","state","pathname","Gprovider","auth","GoogleAuthProvider","handleSignInGoogle","console","log","signInWithPopup","then","result","displayName","photoURL","user","signInUser","credential","token","accessToken","catch","message","fbprovider","FacebookAuthProvider","handleSignInFacebook","errorCode","code","errorMessage","handlesubmitLogin","e","signInWithEmailAndPassword","userCredential","newUser","success","replace","preventDefault","handleformEventLogIn","target","value","isValidForm","test","isPasswordValid","length","passwordNumber","color","textAlign"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport './Login.css'\r\nimport { UserContext } from '../App';\r\n\r\nconst Login = () => {\r\n    const [LogUser ,setLogUser]=useState({\r\n        isSignIn:false,\r\n        name:\"\",\r\n        email:'',\r\n        password:'',\r\n        photo:'',\r\n        error:''\r\n      })\r\n      const [LoggedIn, setLoggedIn] =useContext(UserContext);\r\n      const history = useHistory();\r\n      const location=useLocation()\r\n      let { from } = location.state || { from: { pathname: \"/\" } };\r\n      // this is google provider\r\n      const Gprovider = new firebase.auth.GoogleAuthProvider();\r\n     // this handleSignInGoogle \r\n      const handleSignInGoogle=()=>{\r\n        console.log('clicked')\r\n        firebase.auth().signInWithPopup(Gprovider)\r\n        .then((result) => {\r\n           console.log(result);\r\n           const {displayName,email,photoURL} = result.user;\r\n           const signInUser={\r\n             isSignIn:true,\r\n             name:displayName,\r\n             email:email,\r\n             photo:photoURL\r\n            }\r\n            setLogUser(signInUser);\r\n           // setLoggedIn(signInUser)\r\n          const credential = result.credential;\r\n      \r\n         \r\n          const token = credential.accessToken;\r\n         \r\n          \r\n         \r\n        }).catch((error) => {\r\n         \r\n          console.log(error);\r\n          console.log(error.message);\r\n         \r\n        \r\n        });\r\n      }\r\n      //this is facebook provider\r\n      const fbprovider = new firebase.auth.FacebookAuthProvider();\r\n      //this handleSignInFacebook \r\n      const handleSignInFacebook =()=>{\r\n        firebase\r\n  .auth()\r\n  .signInWithPopup(fbprovider)\r\n  .then((result) => {\r\n    /** @type {firebase.auth.OAuthCredential} */\r\n    var credential = result.credential;\r\n\r\n    // The signed-in user info.\r\n    var user = result.user;\r\n\r\n    // This gives you a Facebook Access Token. You can use it to access the Facebook API.\r\n    var accessToken = credential.accessToken;\r\n\r\n    // ...\r\n  })\r\n  .catch((error) => {\r\n    // Handle Errors here.\r\n    var errorCode = error.code;\r\n    var errorMessage = error.message;\r\n    // The email of the user's account used.\r\n    var email = error.email;\r\n    // The firebase.auth.AuthCredential type that was used.\r\n    var credential = error.credential;\r\n\r\n    // ...\r\n  });\r\n      }\r\n//     this is handlesubmit \r\nconst handlesubmitLogin =(e) =>{\r\n     console.log(\"right\")\r\n\r\n   if(LogUser.email && LogUser.password){\r\n       console.log(\"clicked\")\r\n      firebase.auth().signInWithEmailAndPassword(LogUser.email, LogUser.password)\r\n  .then((userCredential) => {\r\n     console.log(\"clicked\")\r\n    var user = userCredential.user;\r\n    const newUser ={...user};\r\n    newUser.error ='';\r\n    newUser.success=true;\r\n    setLogUser(newUser);\r\n    setLoggedIn(newUser);\r\n  //  getJwttoken();\r\n    history.replace(from);\r\n    var user = userCredential.user;\r\n    console.log(userCredential);\r\n    \r\n  })\r\n  .catch((error) => {\r\n    const newUser ={...LogUser};\r\n    newUser.error =error.message;\r\n    newUser.success=false;\r\n    setLogUser(newUser);\r\n    var errorCode = error.code;\r\n    var errorMessage = error.message;\r\n  });\r\n    }\r\n  \r\n  \r\n    e.preventDefault();\r\n  }\r\n  // const getJwttoken=()=>{\r\n  //   firebase.auth().currentUser.getIdToken(/* forceRefresh */ true)\r\n  //   .then(function(idToken) {\r\n  //     sessionStorage.setItem('token',idToken);\r\n  //     // console.log(idToken)\r\n  //   }).catch(function(error) {\r\n  //     // Handle error\r\n  //   });\r\n  // }\r\n //     this is handleformEvent for input tag\r\n\r\nconst handleformEventLogIn=(e) =>{\r\n    console.log(e.target.name,e.target.value);\r\n     let isValidForm =true;\r\n     if(e.target.name === 'name'){\r\n      isValidForm= e.target.value;\r\n     }\r\n    if(e.target.name === 'email'){\r\n      isValidForm =/\\S+@\\S+\\.\\S+/.test(e.target.value);\r\n      \r\n    }\r\n    if(e.target.name === 'password'){\r\n      const isPasswordValid= e.target.value.length > 6 ;\r\n      const passwordNumber = /\\d{1}/.test(e.target.value);\r\n      isValidForm=isPasswordValid && passwordNumber;\r\n    }\r\n    if(isValidForm){\r\n      const newUser= {...LogUser};\r\n       newUser[e.target.name]=e.target.value;\r\n       setLogUser(newUser);\r\n    }\r\n}\r\n\r\n    return (\r\n        <div>\r\n                           {\r\n       LogUser.success && <p style={{color: \"green\",textAlign:'center'}}> user {LogUser ? 'login successfully' : 'failed'}</p>\r\n     }\r\n            <form onSubmit={handlesubmitLogin} className='login-container'>\r\n                <div  className='login-cart'>\r\n                <h3>Login</h3>\r\n                <input className='cart-input' type=\"email\"onBlur={handleformEventLogIn} name=\"email\" id=\"\" placeholder=\"Email\"/>\r\n                <br/>\r\n                <input className='cart-input' type=\"password\"onBlur={handleformEventLogIn} name=\"password\" id=\"\"placeholder=\"Password\"/>\r\n                <div className='login-cart-child'>\r\n                    <div className='remember-checkbox'>    \r\n                    <input type=\"checkbox\" name=\"remember\" id=\"\"/>\r\n                    <label htmlFor=\"remember\">Remember Me</label>  \r\n                    </div>\r\n                    <div className='forget-pass'>\r\n                        <a href=\"#\">Forgot Password</a>\r\n                    </div>\r\n                </div>\r\n                 <input type=\"submit\" value=\"Login\" className='login-btn'/>\r\n               \r\n                <div className='create-account'>\r\n                    <p>Dont have an account? <Link to='/signup'><a href=\"\">Create an Account</a></Link></p> \r\n                  \r\n                </div>\r\n              \r\n              \r\n            </div>\r\n            </form>\r\n           \r\n            <div className='AutoSignup'>\r\n            <p>or</p>\r\n            <br/>\r\n            <button onClick={handleSignInGoogle}>Continue With Google</button>\r\n            <br/>\r\n            <button onClick={handleSignInFacebook} >Continue With Facebook</button>\r\n            </div>\r\n      \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}